[gd_scene load_steps=9 format=3 uid="uid://bvfhagtxo8wnp"]

[ext_resource type="Texture2D" uid="uid://dontbloejuiv1" path="res://assets/hair/hair1_back.png" id="1_xhhhn"]
[ext_resource type="Texture2D" uid="uid://xu5y77fjhjhe" path="res://assets/body/body1.png" id="2_hmoj5"]
[ext_resource type="Texture2D" uid="uid://djo2x2ahinpke" path="res://assets/eyes/eyes1.png" id="3_tgra6"]
[ext_resource type="Texture2D" uid="uid://cuxrqkqclb357" path="res://assets/eyebrows/eyebrows1.png" id="4_ticpo"]
[ext_resource type="Texture2D" uid="uid://cytnkyninyevh" path="res://assets/lips/lips1.png" id="5_fygbf"]
[ext_resource type="Texture2D" uid="uid://cr6neu6gd72s3" path="res://assets/shirt/shirt1.png" id="6_cxnke"]
[ext_resource type="Texture2D" uid="uid://jwrlg37v4v2k" path="res://assets/hair/hair1_front.png" id="7_jdirh"]

[sub_resource type="GDScript" id="GDScript_qwbkk"]
script/source = "extends Node2D

# Get parts from Customer
@onready var body = $Body
@onready var hair_back = $HairBack
@onready var hair_front = $HairFront
@onready var eyes = $Eyes
@onready var eyebrows = $Eyebrows
@onready var lips = $Lips
@onready var shirt = $Shirt

# Called when the node enters the scene tree for the first time.
func _ready():
	restore_selections()

# Texture change functions
func change_body(tex: Texture2D):
	body.texture = tex
	Gamestate.selections[\"body\"] = tex.resource_path

func change_eyes(tex: Texture2D):
	eyes.texture = tex
	Gamestate.selections[\"eyes\"] = tex.resource_path

func change_eyebrows(tex: Texture2D):
	eyebrows.texture = tex
	Gamestate.selections[\"eyebrows\"] = tex.resource_path

func change_lips(tex: Texture2D):
	lips.texture = tex
	Gamestate.selections[\"lips\"] = tex.resource_path

func change_shirt(tex: Texture2D):
	shirt.texture = tex
	Gamestate.selections[\"shirt\"] = tex.resource_path

func change_hair(back_tex: Texture2D, front_tex: Texture2D):
	hair_back.texture = back_tex
	hair_front.texture = front_tex
	Gamestate.selections[\"hair\"] = {
		\"back\": back_tex.resource_path,
		\"front\": front_tex.resource_path
	}


# Restore player's choices from previous scene
func restore_selections():
	if Gamestate.selections[\"body\"]:
		body.texture = load(Gamestate.selections[\"body\"])
	
	if Gamestate.selections[\"hair\"]:
		hair_back.texture = load(Gamestate.selections[\"hair\"][\"back\"])
		hair_front.texture = load(Gamestate.selections[\"hair\"][\"front\"])

	if Gamestate.selections[\"eyes\"]:
		eyes.texture = load(Gamestate.selections[\"eyes\"])

	if Gamestate.selections[\"eyebrows\"]:
		eyebrows.texture = load(Gamestate.selections[\"eyebrows\"])

	if Gamestate.selections[\"lips\"]:
		lips.texture = load(Gamestate.selections[\"lips\"])

	if Gamestate.selections[\"shirt\"]:
		shirt.texture = load(Gamestate.selections[\"shirt\"])

"

[node name="Customer" type="Node2D"]
script = SubResource("GDScript_qwbkk")

[node name="HairBack" type="Sprite2D" parent="."]
z_index = -1
texture = ExtResource("1_xhhhn")

[node name="Body" type="Sprite2D" parent="."]
texture = ExtResource("2_hmoj5")

[node name="Eyes" type="Sprite2D" parent="."]
z_index = 1
texture = ExtResource("3_tgra6")

[node name="Eyebrows" type="Sprite2D" parent="."]
z_index = 2
texture = ExtResource("4_ticpo")

[node name="Lips" type="Sprite2D" parent="."]
z_index = 3
texture = ExtResource("5_fygbf")

[node name="Shirt" type="Sprite2D" parent="."]
z_index = 4
texture = ExtResource("6_cxnke")

[node name="HairFront" type="Sprite2D" parent="."]
z_index = 5
texture = ExtResource("7_jdirh")
